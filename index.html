<!DOCTYPE html>
<!-- saved from url=(0056)http://fiddle.jshell.net/thirtydot/9SEMf/869/show/light/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
 <script type="text/javascript" src="./pixels_files/jquery-1.7.1.js"></script>

  

  
    <link rel="stylesheet" type="text/css" href="./pixels_files/normalize.css">
  

  

  
    <link rel="stylesheet" type="text/css" href="./pixels_files/result-light.css">
  

  

  <style type="text/css">
body {background: lightblue;padding: 20px;}
pre {color: black}
img {position: relative; border:2px;}
#zoom {
	border:solid 2px black;
}
#main{
	border:solid 10px black;
}
  </style>

  <title> Pixels</title>

<script type="text/javascript">//<![CDATA[

//Sources I used online:
// http://stackoverflow.com/questions/23971717/magnifying-glass-that-follows-cursor-for-canvas
// http://stackoverflow.com/questions/8751020/how-to-get-a-pixels-x-y-coordinate-color-from-an-image
// http://stackoverflow.com/questions/14208673/how-to-draw-grid-using-html5-and-canvas-or-svg
// http://stackoverflow.com/questions/5422265/how-can-i-pre-populate-html-form-input-fields-from-url-parameters


$(window).load(function(){
$(function() {
    
	
	var img = new Image();
	img.src = 'tracer-cropped.png';
	img.style = 
	pixelZoomRatio = 20;
	
	$('#startPtX').val(querySt("x"));
	$('#startPtY').val(querySt("y"));
	
	img.onload = function (e) {
		canvasMain = $('#main')[0];
		//console.log(canvasMain);
        canvasMain.width = this.width * pixelZoomRatio;
        canvasMain.height = this.height * pixelZoomRatio;
		//console.log(this.width);
		//console.log(pixelZoomRatio);
		//console.log(canvasMain.width);
		canvasMain.style.width = this.width * pixelZoomRatio;
		canvasMain.style.height = this.height * pixelZoomRatio;
		drawGrid();
		canvasMain.getContext('2d').imageSmoothingEnabled = false;
        canvasMain.getContext('2d').drawImage(this, 0, 0, canvasMain.width, canvasMain.height);			
		
	};
	
	canvasMain = $('#main')[0];
	
	
	$('#main').mouseout(function(e) {
		$("#zoomBox")[0].style.display = "none";
	});
	
    $('#main').mousemove(function(e) {
                
        var pixelData = this.getContext('2d').getImageData(event.offsetX, event.offsetY, 1, 1).data;
        
		var pixelRatio = 1;
		var pixelX = Math.floor(event.offsetX/pixelZoomRatio) + parseInt($('#startPtX').val()) ;
		var pixelY = Math.floor(event.offsetY/pixelZoomRatio) + parseInt($('#startPtY').val()) ;
		
        $('#output').html(
			'Coords: (' + pixelX + ' , ' + pixelY + ' ) ' +
			'<br>R: ' + pixelData[0] + 
			'<br>G: ' + pixelData[1] + 
			'<br>B: ' + pixelData[2] + 
			'<br>A: ' + pixelData[3]
		);
		
		$('#zoomOutput').html(
			'(' + pixelX + ' , ' + pixelY + ' )'  
		);
		canvasZoom = $("#zoom")[0];
		var currColor = "rgb(" + pixelData[0] + "," + pixelData[1] + "," + pixelData[2] + ")"
		canvasZoom.getContext('2d').fillStyle = currColor;
		//console.log(canvasZoom.fillStyle);
		canvasZoom.getContext('2d').fillRect(0,0,canvasZoom.width, canvasZoom.height);
		
		//having the border change color is kinda distracting
		//$('#main')[0].style["border-color"] = currColor;
		//canvasZoom.getContext('2d').drawImage(this.canvasMain, e.x, e.y, canvasZoom.width, canvasZoom.height, 0, 0, canvasZoom.width, canvasZoom.height);
		zoomBox = $("#zoomBox")[0];
		zoomBox.style.top = e.pageY + 10 + "px";
		zoomBox.style.left = e.pageX + 10 + "px";
		zoomBox.style.display = "block";
        canvasZoom.style.display = "block";
    });
	

    
});

});//]]> 

function querySt(ji) {

	hu = window.location.search.substring(1);
	gy = hu.split("&");

	for (i=0;i<gy.length;i++) {
		ft = gy[i].split("=");
		if (ft[0] == ji) {
			return ft[1];
		}
	}
	return 0;
}

function drawGrid() {
            var cnv = document.getElementById("main");
            
            var gridOptions = {
                minorLines: {
                    separation: pixelZoomRatio,
                    color: '#999999',
					thickness: 1,
                },
                majorLines: {
                    separation: pixelZoomRatio*10,
                    color: '#333333',
					thickness: 3,
                }
            };

            drawGridLines(cnv, gridOptions.minorLines);
            drawGridLines(cnv, gridOptions.majorLines);

            return;
        }

        function drawGridLines(cnv, lineOptions) {


            var iWidth = cnv.width;
            var iHeight = cnv.height;

            var ctx = cnv.getContext('2d');

            ctx.strokeStyle = lineOptions.color;
            ctx.lineWidth = lineOptions.thickness;
            
            ctx.beginPath();

            var iCount = null;
            var i = null;
            var x = null;
            var y = null;

            iCount = Math.floor(iWidth / lineOptions.separation);

            for (i = 1; i <= iCount; i++) {
                x = (i * lineOptions.separation);
                ctx.moveTo(x, 0);
                ctx.lineTo(x, iHeight);
                ctx.stroke();
            }


            iCount = Math.floor(iHeight / lineOptions.separation);

            for (i = 1; i <= iCount; i++) {
                y = (i * lineOptions.separation);
                ctx.moveTo(0, y);
                ctx.lineTo(iWidth, y);
                ctx.stroke();
            }

            ctx.closePath();

            return;
        }


</script>

  
</head>

<body data-feedly-mini="yes">
  <label for="startPtX">Start X Point: </label><input type="text" id="startPtX" value=0 size=5><br />
  <label for="startPtX">Start Y Point: </label><input type="text" id="startPtY" value=0 size=5><br /><br />
  <div id="zoomBox" style="position:absolute; top:0; left:0; display:none; z-index:5" >
	<canvas id="zoom" width="50" height="50" ></canvas>
	<pre id="zoomOutput" style="background-color:white;padding:3px;"></pre>
	
  </div>
  <canvas id="main" width="50" height="50" ></canvas>
    <pre id="output"></pre>
  

  <script>
  // tell the embed parent frame the height of the content
  if (window.parent && window.parent.parent){
    window.parent.parent.postMessage(["resultsFrame", {
      height: document.body.getBoundingClientRect().height,
      slug: "9SEMf"
    }], "*")
  }
</script>





<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>